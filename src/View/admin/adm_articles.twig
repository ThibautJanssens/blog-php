{% extends 'admin/adm_common.twig' %}
{% block content %}
<h2>Articles</h2>
<p>Here is a list of all your articles<p>
<div class="table-responsive">
  <table class="table table-hover">
    <thead class="bg-danger text-white">
      <tr>
        <th scope="col">#</th>
        <th scope="col">Title</th>
        <th scope="col">Category</th>
        <th scope="col">Author</th>
        <th scope="col">Date</th>
        <th scope="col">Edit</th>
        <th scope="col">Delete</th>
      </tr>
    </thead>
    <tbody>
        {% set i = 1 %}
        {% for article in articles %}
      <tr>
        <td>{{ i }}</td>
        <td>{{ article['title'] }}</td>
        {% set cats = "" %}
            {% for category in article['categories'] %}
              {% if loop.last %}
                {% set cats = cats ~ category['cat_name'] ~ " " %}
              {% else  %}
                {% set cats = cats ~ category['cat_name'] ~ ", " %}
              {% endif %}
            {% endfor %}
        <td>{{cats}}</td>
        <td>{{ article['username'] }}</td>
        <td>{{ article['date_publication']|slice(0, 10) }}</td>
        <td><a href="adm_articles/edit_{{ article['article_id'] }}"><i class="fas fa-edit"></i></a></td>
        <td><a href="adm_articles/delete_{{ article['article_id'] }}"><i class="fas fa-trash"></i></a></td>
      </tr>
        {% set i = i + 1 %}
        {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}
